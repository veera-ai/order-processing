{"is_source_file": true, "format": "JavaScript", "description": "Database configuration file for connecting to MongoDB, including connection management and error handling.", "external_files": ["./logger.js"], "external_methods": [], "published": ["connectDB"], "classes": [], "methods": [{"name": "connectDB", "description": "Connect to MongoDB database with retry logic and enhanced error handling."}, {"name": "getMongoURI", "description": "Retrieve the MongoDB URI based on the current environment."}, {"name": "setupConnectionMonitoring", "description": "Set up event listeners to monitor the connection state of MongoDB."}], "calls": ["mongoose.connect", "mongoose.connection.on", "logger.info", "logger.error", "logger.warn", "mongoose.connection.close"], "search-terms": ["MongoDB", "connection", "retry logic", "setupConnectionMonitoring", "environment variables"], "state": 2, "file_id": 13, "knowledge_revision": 130, "git_revision": "906589ebe3993184b636ddfb8e96afa429316a90", "revision_history": [{"28": ""}, {"43": ""}, {"63": "8296b8630f75858aa9ee4b404a93a5282a92129b"}, {"64": "8296b8630f75858aa9ee4b404a93a5282a92129b"}, {"130": "906589ebe3993184b636ddfb8e96afa429316a90"}], "ctags": [{"_type": "tag", "name": "conn", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^      const conn = await mongoose.connect(mongoURI, connectionOptions);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "connectDB", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^const connectDB = async () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "connectTimeoutMS", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  connectTimeoutMS: 30000,$/", "language": "JavaScript", "kind": "property", "scope": "connectionOptions", "scopeKind": "class"}, {"_type": "tag", "name": "connectionOptions", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^const connectionOptions = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "defaultURI", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  const defaultURI = process.env.MONGODB_URI;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "delay", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^        const delay = Math.pow(2, retryCount) * 1000; \\/\\/ Exponential backoff$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "family", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  family: 4,$/", "language": "JavaScript", "kind": "property", "scope": "connectionOptions", "scopeKind": "class"}, {"_type": "tag", "name": "getMongoURI", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^const getMongoURI = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "isProduction", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  const isProduction = process.env.NODE_ENV === 'production';$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "lastError", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  let lastError = null;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "maxIdleTimeMS", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  maxIdleTimeMS: 30000,$/", "language": "JavaScript", "kind": "property", "scope": "connectionOptions", "scopeKind": "class"}, {"_type": "tag", "name": "maxPoolSize", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  maxPoolSize: 10,$/", "language": "JavaScript", "kind": "property", "scope": "connectionOptions", "scopeKind": "class"}, {"_type": "tag", "name": "maxRetries", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  const maxRetries = 3;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "minPoolSize", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  minPoolSize: 2,$/", "language": "JavaScript", "kind": "property", "scope": "connectionOptions", "scopeKind": "class"}, {"_type": "tag", "name": "mongoURI", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^      const mongoURI = getMongoURI();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "replicaSetURI", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  const replicaSetURI = process.env.MONGODB_REPLICA_SET_URI;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "retryCount", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  let retryCount = 0;$/", "language": "JavaScript", "kind": "variable"}, {"_type": "tag", "name": "retryReads", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  retryReads: true,$/", "language": "JavaScript", "kind": "property", "scope": "connectionOptions", "scopeKind": "class"}, {"_type": "tag", "name": "retryWrites", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  retryWrites: true,$/", "language": "JavaScript", "kind": "property", "scope": "connectionOptions", "scopeKind": "class"}, {"_type": "tag", "name": "serverSelectionTimeoutMS", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  serverSelectionTimeoutMS: 5000,$/", "language": "JavaScript", "kind": "property", "scope": "connectionOptions", "scopeKind": "class"}, {"_type": "tag", "name": "setupConnectionMonitoring", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^const setupConnectionMonitoring = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "socketTimeoutMS", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  socketTimeoutMS: 45000,$/", "language": "JavaScript", "kind": "property", "scope": "connectionOptions", "scopeKind": "class"}, {"_type": "tag", "name": "useNewUrlParser", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  useNewUrlParser: true,$/", "language": "JavaScript", "kind": "property", "scope": "connectionOptions", "scopeKind": "class"}, {"_type": "tag", "name": "useUnifiedTopology", "path": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "pattern": "/^  useUnifiedTopology: true,$/", "language": "JavaScript", "kind": "property", "scope": "connectionOptions", "scopeKind": "class"}], "filename": "/home/kavia/workspace/order-processing/authentication_component/src/config/database.js", "hash": "783cd2dad85b2e8ef3dd5afd95b8fa6b", "format-version": 4, "code-base-name": "default", "fields": [{"name": "connectTimeoutMS: 30000,", "scope": "connectionOptions", "scopeKind": "class", "description": "unavailable"}, {"name": "family: 4,", "scope": "connectionOptions", "scopeKind": "class", "description": "unavailable"}, {"name": "let lastError = null;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "maxIdleTimeMS: 30000,", "scope": "connectionOptions", "scopeKind": "class", "description": "unavailable"}, {"name": "maxPoolSize: 10,", "scope": "connectionOptions", "scopeKind": "class", "description": "unavailable"}, {"name": "minPoolSize: 2,", "scope": "connectionOptions", "scopeKind": "class", "description": "unavailable"}, {"name": "let retryCount = 0;", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "retryReads: true,", "scope": "connectionOptions", "scopeKind": "class", "description": "unavailable"}, {"name": "retryWrites: true,", "scope": "connectionOptions", "scopeKind": "class", "description": "unavailable"}, {"name": "serverSelectionTimeoutMS: 5000,", "scope": "connectionOptions", "scopeKind": "class", "description": "unavailable"}, {"name": "socketTimeoutMS: 45000,", "scope": "connectionOptions", "scopeKind": "class", "description": "unavailable"}, {"name": "useNewUrlParser: true,", "scope": "connectionOptions", "scopeKind": "class", "description": "unavailable"}, {"name": "useUnifiedTopology: true,", "scope": "connectionOptions", "scopeKind": "class", "description": "unavailable"}]}